{"version":3,"file":"index.js","sources":["../../src/ts/DragPaneController.ts","../../src/ts/AppIconController.ts","../../src/ts/index.ts"],"sourcesContent":["export default class DragPaneController {\n\n    public parentEl: HTMLDivElement;\n\n    public dockedQty: number = 0;\n\n    public dockedEl: Set<HTMLElement> = new Set();\n\n    public readonly dragBarHeight = 40;\n\n    constructor(){\n        this.parentEl = document.querySelector<HTMLDivElement>(\"#main\")!;\n\n        this.parentEl.addEventListener('toggleminimize', (event: Event) => {\n            if ((event.target! as any).minimized) {\n                this.handleMinimize(event);\n            } else {\n                this.handleMaximize(event);\n            }\n        });\n\n        window.addEventListener(\"resize\", this.handleWindowResize)\n\n    }\n\n    private handleMinimize = (event: Event) => {\n        const el = (event.target! as HTMLElement);\n        const initialPos = {top: el.style.top, left: el.style.left};\n        el.dataset.initialPos = JSON.stringify(initialPos);\n        el.style.top = `${window.innerHeight - this.dragBarHeight - 20}px`;\n        el.style.left = `${this.dockedQty * 20}px`;\n        this.dockedQty ++;\n        this.dockedEl.add(el);\n    };\n\n    private handleMaximize = (event: Event) => {\n        const el = (event.target! as HTMLElement);\n        this.dockedQty --;\n        this.dockedEl.delete(el);\n        const initialPos = el.dataset.initialPos;\n        if (initialPos) {\n            const initialPosObj = JSON.parse(initialPos);\n            el.style.top = initialPosObj.top;\n            el.style.left = initialPosObj.left;\n        };\n    };\n\n    private handleWindowResize = () => {\n        this.dockedEl.forEach( (el) => {\n            el.style.top = `${window.innerHeight - this.dragBarHeight - 20}px`;\n        });\n    };\n}","import {DragPane, MinesweeperGame} from \"./Interfaces/CustomElements\";\n\nenum App {\n    MINESWEEPER = \"ms-app\",\n    CLOCK = \"clock-app\",\n};\n\nexport default class AppIconController {\n\n    public iconRef: NodeListOf<HTMLDivElement>;\n    public parentEl: HTMLDivElement;\n\n    public openApps: Map<App, HTMLElement> = new Map();\n\n    public activeApp: App|undefined = undefined;\n\n\n    constructor(){\n        this.iconRef = document.querySelectorAll<HTMLDivElement>(\".click-icon\");\n        this.parentEl = document.querySelector<HTMLDivElement>(\"#main\")!;\n\n        this.iconRef.forEach( (el) => {\n            el.addEventListener(\"dblclick\", this.handleIconDblClick);\n        });\n    }\n\n    private moveToTop = (app: App) => {\n        // this.parentEl.appendChild(el)\n        this.openApps.forEach( (value, key) => {\n            value.style.zIndex = \"1\";\n        });\n        this.openApps.get(app)!.style.zIndex = \"2\";\n        this.activeApp = app;\n    };\n\n    private handleIconDblClick = (event: MouseEvent) => {\n        const appID = (event.currentTarget as HTMLDivElement).id;\n        switch (appID) {\n            case \"ms-app\":\n                this.openMsApp();\n                break;\n            case \"clock-app\":\n                this.openClockApp();\n                break;\n            default:\n                console.log(appID);\n                break;\n        }\n    };\n\n    private openMsApp(){\n        if (!this.openApps.has(App.MINESWEEPER)) {\n            const pane = document.createElement(\"drag-pane\") as DragPane.Element;\n            pane.heading = \"Minesweeper\";\n            pane.id = App.MINESWEEPER;\n            pane.className = \"app-pane\";\n\n            const msGame = document.createElement(\"minesweeper-game\") as MinesweeperGame.Element;\n            msGame.width = 10;\n            msGame.height = 10;\n            msGame.scale = 0.6;\n\n            pane.appendChild(msGame);\n            this.parentEl.appendChild(pane);\n\n            this.openApps.set(App.MINESWEEPER, pane);\n            this.activeApp = App.MINESWEEPER;\n\n            pane.addEventListener(\"remove\", () => {\n                this.openApps.delete(App.MINESWEEPER);\n            }, {once: true});\n\n            pane.addEventListener(\"click\", () => {\n                if (this.activeApp !== App.MINESWEEPER && this.openApps.size > 1 )\n                this.moveToTop(App.MINESWEEPER);\n            });\n        } else {\n            (this.openApps.get(App.MINESWEEPER) as DragPane.Element)?.toggleMinimized();\n        }\n    };\n\n    private openClockApp(){\n        if (!this.openApps.has(App.CLOCK)) {\n            const pane = document.createElement(\"drag-pane\") as DragPane.Element;\n            pane.heading = \"Clock\";\n            pane.id = App.CLOCK;\n            pane.className = \"app-pane\";\n\n            const clock = document.createElement(\"date-clock\");\n\n            pane.appendChild(clock);\n            this.parentEl.appendChild(pane);\n\n            this.openApps.set(App.CLOCK, pane);\n            this.activeApp = App.CLOCK;\n\n            pane.addEventListener(\"remove\", () => {\n                this.openApps.delete(App.CLOCK);\n            }, {once: true});\n\n            pane.addEventListener(\"click\", () => {\n                if (this.activeApp !== App.CLOCK && this.openApps.size > 1)\n                this.moveToTop(App.CLOCK);\n            });\n\n        }else {\n            (this.openApps.get(App.CLOCK) as DragPane.Element)?.toggleMinimized();\n        }\n    }\n\n}","import DragPaneController from \"./DragPaneController\";\nimport AppIconController from \"./AppIconController\";\n\nexport const initializeViewControllers = () => {\n    new DragPaneController();\n    new AppIconController();\n}"],"names":["DragPaneController","[object Object]","this","Set","event","el","target","initialPos","top","style","left","dataset","JSON","stringify","window","innerHeight","dragBarHeight","dockedQty","dockedEl","add","delete","initialPosObj","parse","forEach","parentEl","document","querySelector","addEventListener","minimized","handleMinimize","handleMaximize","handleWindowResize","App","AppIconController","Map","undefined","app","openApps","value","key","zIndex","get","activeApp","appID","currentTarget","id","openMsApp","openClockApp","console","log","iconRef","querySelectorAll","handleIconDblClick","has","MINESWEEPER","toggleMinimized","pane","createElement","heading","className","msGame","width","height","scale","appendChild","set","once","size","moveToTop","CLOCK","clock","initializeViewControllers"],"mappings":"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"}