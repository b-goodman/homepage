{"version":3,"file":"index.js","sources":["../../src/ts/DragPaneController.ts","../../src/ts/AppIconController.ts","../../src/ts/index.ts"],"sourcesContent":["export default class DragPaneController {\n\n    public parentEl: HTMLDivElement;\n\n    public dockedQty: number = 0;\n\n    public dockedEl: Set<HTMLElement> = new Set();\n\n    public readonly dragBarHeight = 40;\n\n    constructor(){\n        this.parentEl = document.querySelector<HTMLDivElement>(\"#main\")!;\n\n        this.parentEl.addEventListener('toggleminimize', (event: Event) => {\n            if ((event.target! as any).minimized) {\n                this.handleMinimize(event);\n            } else {\n                this.handleMaximize(event);\n            }\n        });\n\n        window.addEventListener(\"resize\", this.handleWindowResize)\n\n    }\n\n    private handleMinimize = (event: Event) => {\n        const el = (event.target! as HTMLElement);\n        const initialPos = {top: el.style.top, left: el.style.left};\n        el.dataset.initialPos = JSON.stringify(initialPos);\n        el.style.top = `${window.innerHeight - this.dragBarHeight - 20}px`;\n        el.style.left = `${this.dockedQty * 20}px`;\n        this.dockedQty ++;\n        this.dockedEl.add(el);\n    };\n\n    private handleMaximize = (event: Event) => {\n        const el = (event.target! as HTMLElement);\n        this.dockedQty --;\n        this.dockedEl.delete(el);\n        const initialPos = el.dataset.initialPos;\n        if (initialPos) {\n            const initialPosObj = JSON.parse(initialPos);\n            el.style.top = initialPosObj.top;\n            el.style.left = initialPosObj.left;\n        };\n    };\n\n    private handleWindowResize = () => {\n        this.dockedEl.forEach( (el) => {\n            el.style.top = `${window.innerHeight - this.dragBarHeight - 20}px`;\n        });\n    };\n}","import {DragPane, MinesweeperGame} from \"./CustomElements\";\n\nenum App {\n    MINESWEEPER = \"ms-app\",\n};\n\nexport default class AppIconController {\n\n    public iconRef: NodeListOf<HTMLDivElement>;\n    public parentEl: HTMLDivElement;\n\n    public openApps: Map<App, HTMLElement> = new Map();\n\n\n    constructor(){\n        this.iconRef = document.querySelectorAll<HTMLDivElement>(\".click-icon\");\n        this.parentEl = document.querySelector<HTMLDivElement>(\"#main\")!;\n\n        this.iconRef.forEach( (el) => {\n            el.addEventListener(\"dblclick\", this.handleIconDblClick);\n        })\n    }\n\n    private handleIconDblClick = (event: MouseEvent) => {\n        const appID = (event.currentTarget as HTMLDivElement).id;\n        switch (appID) {\n            case \"ms-app\":\n                this.openMsApp();\n                break;\n            default:\n                console.log(appID);\n                break;\n        }\n    };\n\n    private openMsApp(){\n        if (!this.openApps.has(App.MINESWEEPER)) {\n            const pane = document.createElement(\"drag-pane\") as DragPane.Element;\n            pane.heading = \"Minesweeper\";\n            pane.id = App.MINESWEEPER;\n\n            const msGame = document.createElement(\"minesweeper-game\") as MinesweeperGame.Element;\n            msGame.width = 10;\n            msGame.height = 10;\n            msGame.scale = 0.6;\n\n            pane.appendChild(msGame);\n            this.parentEl.appendChild(pane);\n\n            this.openApps.set(App.MINESWEEPER, pane);\n            pane.addEventListener(\"remove\", () => {\n                this.openApps.delete(App.MINESWEEPER);\n            }, {once: true})\n        } else {\n            (this.openApps.get(App.MINESWEEPER) as DragPane.Element)?.toggleMinimized();\n        }\n    };\n\n}","import DragPaneController from \"./DragPaneController\";\nimport AppIconController from \"./AppIconController\";\n\nexport const initializeViewControllers = () => {\n    new DragPaneController();\n    new AppIconController();\n}"],"names":["DragPaneController","[object Object]","this","Set","event","el","target","initialPos","top","style","left","dataset","JSON","stringify","window","innerHeight","dragBarHeight","dockedQty","dockedEl","add","delete","initialPosObj","parse","forEach","parentEl","document","querySelector","addEventListener","minimized","handleMinimize","handleMaximize","handleWindowResize","App","AppIconController","Map","appID","currentTarget","id","openMsApp","console","log","iconRef","querySelectorAll","handleIconDblClick","openApps","has","MINESWEEPER","get","toggleMinimized","pane","createElement","heading","msGame","width","height","scale","appendChild","set","once","initializeViewControllers"],"mappings":"MAAqBA,EAUjBC,cANOC,eAAoB,EAEpBA,cAA6B,IAAIC,IAExBD,mBAAgB,GAiBxBA,oBAAkBE,IACtB,MAAMC,EAAMD,EAAME,OACZC,EAAa,CAACC,IAAKH,EAAGI,MAAMD,IAAKE,KAAML,EAAGI,MAAMC,MACtDL,EAAGM,QAAQJ,WAAaK,KAAKC,UAAUN,GACvCF,EAAGI,MAAMD,IAAM,GAAGM,OAAOC,YAAcb,KAAKc,cAAgB,OAC5DX,EAAGI,MAAMC,KAAO,GAAoB,GAAjBR,KAAKe,cACxBf,KAAKe,YACLf,KAAKgB,SAASC,IAAId,IAGdH,oBAAkBE,IACtB,MAAMC,EAAMD,EAAME,OAClBJ,KAAKe,YACLf,KAAKgB,SAASE,OAAOf,GACrB,MAAME,EAAaF,EAAGM,QAAQJ,WAC9B,GAAIA,EAAY,CACZ,MAAMc,EAAgBT,KAAKU,MAAMf,GACjCF,EAAGI,MAAMD,IAAMa,EAAcb,IAC7BH,EAAGI,MAAMC,KAAOW,EAAcX,OAI9BR,wBAAqB,KACzBA,KAAKgB,SAASK,QAAUlB,IACpBA,EAAGI,MAAMD,IAAM,GAAGM,OAAOC,YAAcb,KAAKc,cAAgB,UAtChEd,KAAKsB,SAAWC,SAASC,cAA8B,SAEvDxB,KAAKsB,SAASG,iBAAiB,iBAAmBvB,IACzCA,EAAME,OAAgBsB,UACvB1B,KAAK2B,eAAezB,GAEpBF,KAAK4B,eAAe1B,KAI5BU,OAAOa,iBAAiB,SAAUzB,KAAK6B,qBCnB/C,IAAKC,GAAL,SAAKA,GACDA,uBADJ,CAAKA,IAAAA,OAEJ,MAEoBC,EAQjBhC,cAHOC,cAAkC,IAAIgC,IAYrChC,wBAAsBE,IAC1B,MAAM+B,EAAS/B,EAAMgC,cAAiCC,GACtD,OAAQF,GACJ,IAAK,SACDjC,KAAKoC,YACL,MACJ,QACIC,QAAQC,IAAIL,KAfpBjC,KAAKuC,QAAUhB,SAASiB,iBAAiC,eACzDxC,KAAKsB,SAAWC,SAASC,cAA8B,SAEvDxB,KAAKuC,QAAQlB,QAAUlB,IACnBA,EAAGsB,iBAAiB,WAAYzB,KAAKyC,sBAgBrC1C,kBACJ,GAAKC,KAAK0C,SAASC,IAAIb,EAAIc,uBAkBtB5C,KAAK0C,SAASG,IAAIf,EAAIc,6BAAmCE,sBAlBrB,CACrC,MAAMC,EAAOxB,SAASyB,cAAc,aACpCD,EAAKE,QAAU,cACfF,EAAKZ,GAAKL,EAAIc,YAEd,MAAMM,EAAS3B,SAASyB,cAAc,oBACtCE,EAAOC,MAAQ,GACfD,EAAOE,OAAS,GAChBF,EAAOG,MAAQ,GAEfN,EAAKO,YAAYJ,GACjBlD,KAAKsB,SAASgC,YAAYP,GAE1B/C,KAAK0C,SAASa,IAAIzB,EAAIc,YAAaG,GACnCA,EAAKtB,iBAAiB,SAAU,KAC5BzB,KAAK0C,SAASxB,OAAOY,EAAIc,cAC1B,CAACY,MAAM,YCjDTC,EAA4B,KACrC,IAAI3D,EACJ,IAAIiC"}