class e{constructor(){this.dockedQty=0,this.dockedEl=new Set,this.dragBarHeight=40,this.handleMinimize=e=>{const t=e.target,i={top:t.style.top,left:t.style.left};t.dataset.initialPos=JSON.stringify(i),t.style.top=`${window.innerHeight-this.dragBarHeight-20}px`,t.style.left=`${20*this.dockedQty}px`,this.dockedQty++,this.dockedEl.add(t)},this.handleMaximize=e=>{const t=e.target;this.dockedQty--,this.dockedEl.delete(t);const i=t.dataset.initialPos;if(i){const e=JSON.parse(i);t.style.top=e.top,t.style.left=e.left}},this.handleWindowResize=()=>{this.dockedEl.forEach(e=>{e.style.top=`${window.innerHeight-this.dragBarHeight-20}px`})},this.parentEl=document.querySelector("#main"),this.parentEl.addEventListener("toggleminimize",e=>{e.target.minimized?this.handleMinimize(e):this.handleMaximize(e)}),window.addEventListener("resize",this.handleWindowResize)}}var t;!function(e){e.MINESWEEPER="ms-app",e.CLOCK="clock-app"}(t||(t={}));class i{constructor(){this.openApps=new Map,this.activeApp=void 0,this.moveToTop=e=>{this.openApps.forEach((e,t)=>{e.style.zIndex="1"}),this.openApps.get(e).style.zIndex="2",this.activeApp=e},this.handleIconDblClick=e=>{const t=e.currentTarget.id;switch(t){case"ms-app":this.openMsApp();break;case"clock-app":this.openClockApp();break;default:console.log(t)}},this.iconRef=document.querySelectorAll(".click-icon"),this.parentEl=document.querySelector("#main"),this.iconRef.forEach(e=>{e.addEventListener("dblclick",this.handleIconDblClick)})}openMsApp(){var e;if(this.openApps.has(t.MINESWEEPER))null===(e=this.openApps.get(t.MINESWEEPER))||void 0===e||e.toggleMinimized();else{const e=document.createElement("drag-pane");e.heading="Minesweeper",e.id=t.MINESWEEPER,e.className="app-pane";const i=document.createElement("minesweeper-game");i.width=10,i.height=10,i.scale=.6,e.appendChild(i),this.parentEl.appendChild(e),this.openApps.set(t.MINESWEEPER,e),this.activeApp=t.MINESWEEPER,e.addEventListener("remove",()=>{this.openApps.delete(t.MINESWEEPER)},{once:!0}),e.addEventListener("click",()=>{this.activeApp!==t.MINESWEEPER&&this.openApps.size>1&&this.moveToTop(t.MINESWEEPER)})}}openClockApp(){var e;if(this.openApps.has(t.CLOCK))null===(e=this.openApps.get(t.CLOCK))||void 0===e||e.toggleMinimized();else{const e=document.createElement("drag-pane");e.heading="Clock",e.id=t.CLOCK,e.className="app-pane";const i=document.createElement("date-clock");e.appendChild(i),this.parentEl.appendChild(e),this.openApps.set(t.CLOCK,e),this.activeApp=t.CLOCK,e.addEventListener("remove",()=>{this.openApps.delete(t.CLOCK)},{once:!0}),e.addEventListener("click",()=>{this.activeApp!==t.CLOCK&&this.openApps.size>1&&this.moveToTop(t.CLOCK)})}}}const s=()=>{new e,new i};export{s as initializeViewControllers};
//# sourceMappingURL=index.js.map
